function e(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}}),n.default=e,n}function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},n.apply(this,arguments)}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var t="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function o(e,n,r){if(!e.s){if(r instanceof i){if(!r.s)return void(r.o=o.bind(null,e,n));1&n&&(n=r.s),r=r.v}if(r&&r.then)return void r.then(o.bind(null,e,n),o.bind(null,e,2));e.s=n,e.v=r;var t=e.o;t&&t(e)}}var i=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(n,r){var t=new e,i=this.s;if(i){var a=1&i?n:r;if(a){try{o(t,1,a(this.v))}catch(e){o(t,2,e)}return t}return this}return this.o=function(e){try{var i=e.v;1&e.s?o(t,1,n?n(i):i):r?o(t,1,r(i)):o(t,2,i)}catch(e){o(t,2,e)}},t},e}();function a(e){return e instanceof i&&1&e.s}var c={react:"18","react-dom":"18"};window.esmImport=function(){try{var n=arguments;return Promise.resolve(Promise.all([].slice.call(n).map(function(n){return r="https://esm.sh/"+n,Promise.resolve().then(function(){/*#__PURE__*/return e(require(r))});var r}))).then(function(e){return 1===e.length?e[0]:e})}catch(e){return Promise.reject(e)}},window.addEventListener("DOMContentLoaded",function(){Promise.resolve(function(){try{var r=n({},c,window.npm_deps||{}),t=Promise.all(Object.keys(r).map(function(n){var t,o=r[n],i="",a=(null==o?void 0:o.name)||n.replace(/-/g,"_");if("string"==typeof o)i=r[n];else if(null!=o&&o.version){var c;i=null==(c=r[n])?void 0:c.version}return(t="https://esm.sh/"+n+(i?"@"+i:""),Promise.resolve().then(function(){/*#__PURE__*/return e(require(t))})).then(function(e){return{module:e,name:a}})}));return Promise.resolve(Promise.all([t,Promise.resolve().then(function(){/*#__PURE__*/return e(require("https://cdn.jsdelivr.net/pyodide/v0.22.0/full/pyodide.js"))})])).then(function(e){return e[0]})}catch(e){return Promise.reject(e)}}()).then(function(e){return Promise.resolve(loadPyodide({fullStdLib:!1})).then(function(n){window.__pyodide=n;for(var c,s=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e))){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(c=s()).done;){var u=c.value;n.registerJsModule(u.name,u.module)}var l=[];return document.querySelectorAll('script[type="text/python"]').forEach(function(e,n){l.push(e.src?fetch(e.src).then(function(e){return e.text()}).then(function(n){return{text:n,name:e.src}}):{text:e.textContent,name:"inline script #"+(n+1)})}),Promise.resolve(Promise.all(l)).then(function(e){return window.__scripts&&Array.isArray(window.__scripts)&&(e=[].concat(e,window.__scripts)),Promise.resolve(function(){try{var e=document.querySelector(".preloader,.pyorea-preloader"),n=function(){if(e)return e.style.transition="opacity 0.4s ease",e.style.opacity=1,e.style.opacity=0,Promise.resolve(new Promise(function(e){return setTimeout(e,410)})).then(function(){e.style.display="none"})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()).then(function(){return n.runPython("\nimport inspect\nimport types\nimport sys\nfrom pyodide.ffi import create_proxy, to_js\nfrom js import window, document, Object\nimport react as React\nimport react_dom as ReactDOM\n\nflatten = lambda *n: (e for a in n\n                      for e in (flatten(*a) if isinstance(a, (tuple, list)) else (a,)))\n\n\n_h = React.createElement\n\n\ndef helper(type, *args):\n    props = None\n    children = []\n    if args and isinstance(args[0], dict):\n        props = to_js(args[0], dict_converter=Object.fromEntries)\n        if args[1:]:\n            children = flatten(args[1:])\n    elif args:\n        children = flatten(args)\n    return _h(type, props, *children)\n\n\nclass HyperScript(type):\n    def __getattribute__(self, __name):\n        def _helper(*args):\n            return helper(__name, *args)\n        return _helper\n\n    def __call__(self, type, *args):\n        return helper(type, *args)\n\n\nclass h(metaclass=HyperScript):\n    pass\n\n\ndef Component(component_fn):\n\n    def inner_fn(props, _opt):\n        func_params = (inspect.signature(component_fn).parameters)\n        return component_fn(props) if func_params else component_fn()\n\n    return create_proxy(inner_fn)\n\n\ndef render(app, selector):\n    root = ReactDOM.createRoot(document.querySelector(selector))\n    root.render(app)\n\n\n\npyorea = types.ModuleType('pyorea')\npyorea.h = h\npyorea.Component = Component\npyorea.render = render\npyorea.React = React\npyorea.esm_import = window.esmImport\nsys.modules['pyorea'] = pyorea\n\n"),function(e,n,r){if("function"==typeof e[t]){var c,s,u,l=e[t]();if(function e(r){try{for(;!(c=l.next()).done;)if((r=n(c.value))&&r.then){if(!a(r))return void r.then(e,u||(u=o.bind(null,s=new i,2)));r=r.v}s?o(s,1,r):s=r}catch(e){o(s||(s=new i),2,e)}}(),l.return){var f=function(e){try{c.done||l.return()}catch(e){}return e};if(s&&s.then)return s.then(f,function(e){throw f(e)});f()}return s}if(!("length"in e))throw new TypeError("Object is not iterable");for(var p=[],d=0;d<e.length;d++)p.push(e[d]);return function(e,n,r){var t,c,s=-1;return function r(u){try{for(;++s<e.length;)if((u=n(s))&&u.then){if(!a(u))return void u.then(r,c||(c=o.bind(null,t=new i,2)));u=u.v}t?o(t,1,u):t=u}catch(e){o(t||(t=new i),2,e)}}(),t}(p,function(e){return n(p[e])})}(e,function(e){var r=e.text,t=e.name,o=function(e,t){try{var o=Promise.resolve(n.loadPackagesFromImports(r)).then(function(){return Promise.resolve(n.runPythonAsync(r)).then(function(){})})}catch(e){return t(e)}return o&&o.then?o.then(void 0,t):o}(0,function(e){console.error("Error in file "+t,e)});if(o&&o.then)return o.then(function(){})})})})})}).catch(function(e){console.warn("load script error",e)})});
//# sourceMappingURL=pyorea.cjs.map
