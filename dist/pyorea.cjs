function e(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}}),n.default=e,n}function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},n.apply(this,arguments)}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function t(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o={react:"18","react-dom":"18"};window.addEventListener("DOMContentLoaded",function(){(function(){try{return console.time("deps"),Promise.resolve(function(){try{var r=n({},o,window.npm_deps||{}),t=Promise.all(Object.keys(r).map(function(n){var t,o=r[n],i="",a=(null==o?void 0:o.name)||n.replace(/-/g,"_");if("string"==typeof o)i=r[n];else if(null!=o&&o.version){var s;i=null==(s=r[n])?void 0:s.version}return(t="https://esm.sh/"+n+(i?"@"+i:""),Promise.resolve().then(function(){/*#__PURE__*/return e(require(t))})).then(function(e){return{module:e,name:a}})}));return Promise.resolve(Promise.all([t,Promise.resolve().then(function(){/*#__PURE__*/return e(require("https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js"))})])).then(function(e){return e[0]})}catch(e){return Promise.reject(e)}}()).then(function(e){return console.timeEnd("deps"),console.time("loadPy"),Promise.resolve(loadPyodide({fullStdLib:!0})).then(function(n){console.timeEnd("loadPy"),console.time("register");for(var r,o=t(e);!(r=o()).done;){var i=r.value;n.registerJsModule(i.name,i.module)}console.timeEnd("register");var a=[];return console.time("script1"),document.querySelectorAll('script[type="text/python"]').forEach(function(e,n){a.push(e.src?fetch(e.src).then(function(e){return e.text()}).then(function(n){return{text:n,name:e.src}}):{text:e.textContent,name:"inline script #"+(n+1)})}),Promise.resolve(Promise.all(a)).then(function(e){return console.log("scriptContecxt",e),console.timeEnd("script1"),Promise.resolve(function(){try{var e=document.querySelector(".preloader"),n=function(){if(e)return e.style.transition="opacity 0.4s ease",e.style.opacity=1,e.style.opacity=0,Promise.resolve(new Promise(function(e){return setTimeout(e,410)})).then(function(){e.style.display="none"})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()).then(function(){console.time("script_ex"),n.runPython("\nimport inspect\nimport types\nimport sys\nfrom pyodide.ffi import create_proxy, to_js\nfrom js import window, document, Object\nimport react as React\nimport react_dom as ReactDOM\n\nflatten = lambda *n: (e for a in n\n                      for e in (flatten(*a) if isinstance(a, (tuple, list)) else (a,)))\n\n\n_h = React.createElement\n\n\ndef helper(type, *args):\n    props = None\n    children = []\n    if args and isinstance(args[0], dict):\n        props = to_js(args[0], dict_converter=Object.fromEntries)\n        if args[1:]:\n            children = flatten(args[1:])\n    elif args:\n        children = flatten(args)\n    return _h(type, props, *children)\n\n\nclass HyperScript(type):\n    def __getattribute__(self, __name):\n        def _helper(*args):\n            return helper(__name, *args)\n        return _helper\n\n    def __call__(self, type, *args):\n        return helper(type, *args)\n\n\nclass h(metaclass=HyperScript):\n    pass\n\n\ndef Component(component_fn):\n\n    def inner_fn(props, _opt):\n        func_params = (inspect.signature(component_fn).parameters)\n        return component_fn(props) if func_params else component_fn()\n\n    return create_proxy(inner_fn)\n\n\ndef render(app, selector):\n    root = ReactDOM.createRoot(document.querySelector(selector))\n    root.render(app)\n\n\n\npyorea = types.ModuleType('pyorea')\npyorea.h = h\npyorea.Component = Component\npyorea.render = render\npyorea.React = React\nsys.modules['pyorea'] = pyorea\n\n");for(var r,o=t(e);!(r=o()).done;){var i=r.value,a=i.text,s=i.name;try{n.runPython(a)}catch(e){console.error("Error in file "+s,e)}}console.timeEnd("script_ex")})})})})}catch(e){return Promise.reject(e)}})().catch(function(e){console.warn("load script error",e)})});
//# sourceMappingURL=pyorea.cjs.map
