!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){function n(){return n=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},n.apply(this,arguments)}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}var r="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function t(n,e,r){if(!n.s){if(r instanceof o){if(!r.s)return void(r.o=t.bind(null,n,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(t.bind(null,n,e),t.bind(null,n,2));n.s=e,n.v=r;var i=n.o;i&&i(n)}}var o=/*#__PURE__*/function(){function n(){}return n.prototype.then=function(e,r){var o=new n,i=this.s;if(i){var a=1&i?e:r;if(a){try{t(o,1,a(this.v))}catch(n){t(o,2,n)}return o}return this}return this.o=function(n){try{var i=n.v;1&n.s?t(o,1,e?e(i):i):r?t(o,1,r(i)):t(o,2,i)}catch(n){t(o,2,n)}},o},n}();function i(n){return n instanceof o&&1&n.s}var a={react:"18","react-dom":"18"};window.esmImport=function(){try{var n=arguments;return Promise.resolve(Promise.all([].slice.call(n).map(function(n){return import("https://esm.sh/"+n)}))).then(function(n){return 1===n.length?n[0]:n})}catch(n){return Promise.reject(n)}},window.addEventListener("DOMContentLoaded",function(){Promise.resolve(function(){try{var e=n({},a,window.npm_deps||{}),r=Promise.all(Object.keys(e).map(function(n){var r=e[n],t="",o=(null==r?void 0:r.name)||n.replace(/-/g,"_");if("string"==typeof r)t=e[n];else if(null!=r&&r.version){var i;t=null==(i=e[n])?void 0:i.version}return import("https://esm.sh/"+n+(t?"@"+t:"")).then(function(n){return{module:n,name:o}})}));return Promise.resolve(Promise.all([r,import("https://cdn.jsdelivr.net/pyodide/v0.22.0/full/pyodide.js")])).then(function(n){return n[0]})}catch(n){return Promise.reject(n)}}()).then(function(n){return Promise.resolve(loadPyodide({fullStdLib:!1})).then(function(a){window.__pyodide=a;for(var c,s=function(n,r){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,r){if(n){if("string"==typeof n)return e(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?e(n,r):void 0}}(n))){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(c=s()).done;){var u=c.value;a.registerJsModule(u.name,u.module)}var f=[];return document.querySelectorAll('script[type="text/python"]').forEach(function(n,e){f.push(n.src?fetch(n.src).then(function(n){return n.text()}).then(function(e){return{text:e,name:n.src}}):{text:n.textContent,name:"inline script #"+(e+1)})}),Promise.resolve(Promise.all(f)).then(function(n){return window.__scripts&&Array.isArray(window.__scripts)&&(n=[].concat(n,window.__scripts)),Promise.resolve(function(){try{var n=document.querySelector(".preloader,.pyorea-preloader"),e=function(){if(n)return n.style.transition="opacity 0.4s ease",n.style.opacity=1,n.style.opacity=0,Promise.resolve(new Promise(function(n){return setTimeout(n,410)})).then(function(){n.style.display="none"})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(n){return Promise.reject(n)}}()).then(function(){return a.runPython("\nimport inspect\nimport types\nimport sys\nfrom pyodide.ffi import create_proxy, to_js\nfrom js import window, document, Object\nimport react as React\nimport react_dom as ReactDOM\n\nflatten = lambda *n: (e for a in n\n                      for e in (flatten(*a) if isinstance(a, (tuple, list)) else (a,)))\n\n\n_h = React.createElement\n\n\ndef helper(type, *args):\n    props = None\n    children = []\n    if args and isinstance(args[0], dict):\n        props = to_js(args[0], dict_converter=Object.fromEntries)\n        if args[1:]:\n            children = flatten(args[1:])\n    elif args:\n        children = flatten(args)\n    return _h(type, props, *children)\n\n\nclass HyperScript(type):\n    def __getattribute__(self, __name):\n        def _helper(*args):\n            return helper(__name, *args)\n        return _helper\n\n    def __call__(self, type, *args):\n        return helper(type, *args)\n\n\nclass h(metaclass=HyperScript):\n    pass\n\n\ndef Component(component_fn):\n\n    def inner_fn(props, _opt):\n        func_params = (inspect.signature(component_fn).parameters)\n        return component_fn(props) if func_params else component_fn()\n\n    return create_proxy(inner_fn)\n\n\ndef render(app, selector):\n    root = ReactDOM.createRoot(document.querySelector(selector))\n    root.render(app)\n\n\n\npyorea = types.ModuleType('pyorea')\npyorea.h = h\npyorea.Component = Component\npyorea.render = render\npyorea.React = React\npyorea.esm_import = window.esmImport\nsys.modules['pyorea'] = pyorea\n\n"),function(n,e,a){if("function"==typeof n[r]){var c,s,u,f=n[r]();if(function n(r){try{for(;!(c=f.next()).done;)if((r=e(c.value))&&r.then){if(!i(r))return void r.then(n,u||(u=t.bind(null,s=new o,2)));r=r.v}s?t(s,1,r):s=r}catch(n){t(s||(s=new o),2,n)}}(),f.return){var l=function(n){try{c.done||f.return()}catch(n){}return n};if(s&&s.then)return s.then(l,function(n){throw l(n)});l()}return s}if(!("length"in n))throw new TypeError("Object is not iterable");for(var p=[],d=0;d<n.length;d++)p.push(n[d]);return function(n,e,r){var a,c,s=-1;return function r(u){try{for(;++s<n.length;)if((u=e(s))&&u.then){if(!i(u))return void u.then(r,c||(c=t.bind(null,a=new o,2)));u=u.v}a?t(a,1,u):a=u}catch(n){t(a||(a=new o),2,n)}}(),a}(p,function(n){return e(p[n])})}(n,function(n){var e=n.text,r=n.name,t=function(n,r){try{var t=Promise.resolve(a.loadPackagesFromImports(e)).then(function(){return Promise.resolve(a.runPythonAsync(e)).then(function(){})})}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}(0,function(n){console.error("Error in file "+r,n)});if(t&&t.then)return t.then(function(){})})})})})}).catch(function(n){console.warn("load script error",n)})})});
//# sourceMappingURL=pyorea.module.js.map
